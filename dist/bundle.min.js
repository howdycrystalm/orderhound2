angular.module("houndApp",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("login",{url:"/",templateUrl:"./routes/login.html",controller:"loginCtrl"}).state("home",{url:"/home",templateUrl:"./routes/home.html",controller:"homeCtrl"}).state("adminHome",{url:"/adminHome",templateUrl:"./routes/adminHome.html",controller:"adminHomeCtrl",resolve:{user:["mainService","$state",function(e,t){return e.getCurrentUser().then(function(e){return e.data.email?e.data:t.go("/")}).catch(function(e){t.go("/")})}]}}).state("manageUser",{url:"/manageUser",templateUrl:"./routes/manageUser.html",controller:"manageUserCtrl",resolve:{user:["mainService","$state",function(e,t){return e.getCurrentUser().then(function(e){return e.data.email?e.data:t.go("/")}).catch(function(e){t.go("/")})}]}}).state("header",{url:"/header",templateUrl:"../routes/directives/headerTmpl.html",controller:"headerCtrl",resolve:{user:["mainService","$state",function(e,t){return e.getCurrentUser().then(function(e){return e.data.email?e.data:t.go("/")}).catch(function(e){t.go("/")})}]}})}]),angular.module("houndApp").controller("adminHomeCtrl",["$scope","mainService","user","$state",function(e,t,r,n){e.user=r,e.obj={},e.logout=function(){t.logout().then(function(e){n.go("login")})},e.register=function(e){t.register(e).then(function(e){return"User created successfully!"!==e.data?alert("Could not register user"):void alert(e.data)}).catch(function(e){return alert("Could not register user")})}}]),angular.module("houndApp").controller("homeCtrl",["$scope","$state","mainService","homeService",function(e,t,r,n){e.addpo=function(e){n.addpo(e).then(function(e){alert("PO added successfully"),t.reload("home")})},e.login=function(n){r.login(n).then(function(r){return r.data?("true"===r.data.admin?t.go("adminHome"):t.go("home"),void console.log(r.data.admin)):(e.user.password="",alert("user could not be logged in"))}).catch(function(t){e.user.password="",alert("user could not be logged in")})},e.logout=function(){r.logout().then(function(e){t.go("login")})}}]),angular.module("houndApp").service("homeService",["$http",function(e){this.addpo=function(t){return e({method:"POST",url:"/api/checkin",data:{ponumber:t,checkpoint_id:1}}).then(function(e){return e.data})}}]),angular.module("houndApp").controller("loginCtrl",["$scope","mainService","$state",function(e,t,r){e.test="login",e.login=function(n){t.login(n).then(function(t){return t.data?("true"===t.data.admin?r.go("adminHome"):r.go("home"),void console.log(t.data.admin)):(e.user.password="",alert("user could not be logged in"))}).catch(function(t){e.user.password="",alert("user could not be logged in")})},e.register=function(e){t.register(e).then(function(e){return"User created successfully!"!==e.data?alert("Could not register user"):void alert(e.data)}).catch(function(e){return alert("Could not register user")})}}]),angular.module("houndApp").service("mainService",["$http",function(e){this.login=function(t){return e({method:"post",url:"/api/login",data:t}).then(function(e){return e})},this.logout=function(){return e({method:"get",url:"/api/logout"}).then(function(e){return e})},this.getCurrentUser=function(){return e({method:"GET",url:"/api/me"}).then(function(e){return e})},this.register=function(t){return e({method:"POST",url:"/api/register",data:t}).then(function(e){return e})},this.addUser=function(t){return e({method:"POST",url:"/api/addUser",data:t}).then(function(e){return e})},this.getter=function(t){return e({method:"POST",url:"/api/addUser",data:user}).then(function(e){return e})},this.getPo=function(){return e({method:"POST",url:"/api/getPo"}).then(function(e){return e})}}]),angular.module("houndApp").controller("manageUserCtrl",["$scope","$state","mainService",function(e,t,r){e.obj={},e.getter=function(e){r.addUser(e).then(function(e){e.data?e.data&&(alert("User Created!"),t.reload("manageUser")):alert("Unable to create user")}).catch(function(e){alert("Unable to create user")})}}]),angular.module("houndApp").controller("headerCtrl",["$scope","searchService","user",function(e,t,r){e.user=r}]),angular.module("houndApp").directive("headerDirective",function(){return{restrict:"AEC",templateUrl:"../../../routes/headerTmpl.html",controller:"headerCtrl"}}),angular.module("houndApp").service("headerService",["$http",function(e){}]),angular.module("houndApp").controller("searchCtrl",["$scope","searchService",function(e,t){e.findpo=function(r){t.findpo(r).then(function(t){alert("PO found!"),console.log(t),e.poInfo=t,e.poNumber=""})}}]),angular.module("houndApp").directive("searchDirective",function(){return{restrict:"AEC",templateUrl:"./routes/directives/searchTmpl.html",controller:"searchCtrl"}}),angular.module("houndApp").service("searchService",["$http",function(e){this.findpo=function(t){return e({method:"GET",url:"/api/getPo/"+t}).then(function(e){return e.data})}}]);