angular.module("houndApp",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("login",{url:"/",templateUrl:"./routes/login.html",controller:"loginCtrl"}).state("home",{url:"/home",templateUrl:"./routes/home.html",controller:"homeCtrl",resolve:{user:["mainService","$state",function(t,e){return t.getCurrentUser().then(function(t){return t.data.email?t.data:e.go("/")}).catch(function(t){e.go("/")})}]}}).state("adminHome",{url:"/adminHome",templateUrl:"./routes/adminHome.html",controller:"adminHomeCtrl",resolve:{user:["mainService","$state",function(t,e){return t.getCurrentUser().then(function(t){return t.data.email&&t.data.admin?t.data:e.go("/")}).catch(function(t){e.go("/")})}]}}).state("manageUser",{url:"/manageUser",templateUrl:"./routes/manageUser.html",controller:"manageUserCtrl",resolve:{user:["mainService","$state",function(t,e){return t.getCurrentUser().then(function(t){return t.data.email?t.data:e.go("/")}).catch(function(t){e.go("/")})}]}})}]),angular.module("houndApp").controller("adminHomeCtrl",["$scope","mainService","homeService","searchService","user","$state",function(t,e,n,o,r,i){t.user=r,t.showModal=!1,t.showX=!1,t.obj={},t.logout=function(){e.logout().then(function(t){i.go("login")})},t.register=function(t){e.register(t).then(function(t){return"User created successfully!"!==t.data?alert("Could not register user"):void alert(t.data)}).catch(function(t){return alert("Could not register user")})},t.findpo=function(e){o.findpo(e).then(function(e){console.log(e),t.poInfo=e,t.poNumber=""})};var u,a=document.getElementsByClassName("admin-accordion");for(u=0;u<a.length;u++)a[u].onclick=function(){this.classList.toggle("active");var t=this.nextElementSibling;t.style.maxHeight?t.style.maxHeight=null:t.style.maxHeight=t.scrollHeight+"px"}}]),angular.module("houndApp").controller("homeCtrl",["$scope","$state","mainService","homeService","searchService","user",function(t,e,n,o,r,i){t.user=i,t.showModal=!1,t.showX=!1,t.addpo=function(t){o.addpo(t).then(function(t){swal({title:"PO added successfully!",type:"success",confirmButtonText:"OK",confirmButtonColor:"#1EB11E"}),e.reload("home")})},t.logout=function(){n.logout().then(function(t){e.go("login")})},t.findpo=function(e){r.findpo(e).then(function(e){console.log(e),t.poInfo=e,t.poNumber=""})};var u,a=document.getElementsByClassName("accordion");for(u=0;u<a.length;u++)a[u].onclick=function(){this.classList.toggle("active");var t=this.nextElementSibling;t.style.maxHeight?t.style.maxHeight=null:t.style.maxHeight=t.scrollHeight+"px"}}]),angular.module("houndApp").service("homeService",["$http",function(t){this.addpo=function(e){return t({method:"POST",url:"/api/checkin",data:{ponumber:e,checkpoint_id:1}}).then(function(t){return t.data})},this.findpo=function(e){return t({method:"GET",url:"/api/getPo/"+e}).then(function(t){return t.data})}}]),angular.module("houndApp").controller("loginCtrl",["$scope","mainService","$state",function(t,e,n){t.test="login",t.login=function(o){e.login(o).then(function(e){return e.data?("true"===e.data.admin?n.go("adminHome"):n.go("home"),void console.log(e.data.admin)):(t.user.password="",swal({title:"You shall not pass!",text:"Incorrect email or password",type:"error",confirmButtonText:"Try Again!",confirmButtonColor:"#153975"}))}).catch(function(e){t.user.password="",swal({title:"You shall not pass!",text:"Incorrect email or password",type:"error",confirmButtonText:"Try Again!",confirmButtonColor:"#153975"})})},t.register=function(t){e.register(t).then(function(t){return"User created successfully!"!==t.data?swal({title:"Can't Register Admin",text:"Admin or business is already registered.",type:"error",confirmButtonText:"OK",confirmButtonColor:"#153975"}):(swal({title:"Registration Successful",text:"You're ready to login as Admin.",type:"success",confirmButtonText:"OK",confirmButtonColor:"#153975"}),void n.reload("login"))}).catch(function(t){return swal({title:"Can't Register Admin",text:"Admin or business is already registered.",type:"error",confirmButtonText:"OK",confirmButtonColor:"#153975"})})}}]),angular.module("houndApp").service("mainService",["$http",function(t){this.login=function(e){return t({method:"post",url:"/api/login",data:e}).then(function(t){return t})},this.logout=function(){return t({method:"get",url:"/api/logout"}).then(function(t){return t})},this.getCurrentUser=function(){return t({method:"GET",url:"/api/me"}).then(function(t){return t})},this.register=function(e){return t({method:"POST",url:"/api/register",data:e}).then(function(t){return t})},this.addUser=function(e){return t({method:"POST",url:"/api/addUser",data:e}).then(function(t){return t})},this.getter=function(e){return t({method:"POST",url:"/api/addUser",data:user}).then(function(t){return t})},this.getPo=function(){return t({method:"POST",url:"/api/getPo"}).then(function(t){return t})}}]),angular.module("houndApp").controller("manageUserCtrl",["$scope","$state","mainService","user",function(t,e,n,o){t.user=o,t.obj={},t.getter=function(t){n.addUser(t).then(function(t){t.data?t.data&&(swal({title:"User Created!",type:"success",confirmButtonText:"OK",confirmButtonColor:"#153975"}),e.reload("manageUser")):swal({title:"Unable to Create User",text:"User may already exist.",type:"error",confirmButtonText:"OK",confirmButtonColor:"#153975"})}).catch(function(t){swal({title:"Unable to Create User",text:"User may already exist.",type:"error",confirmButtonText:"OK",confirmButtonColor:"#153975"})})},t.logout=function(){n.logout().then(function(t){e.go("login")})}}]),angular.module("houndApp").controller("headerCtrl",["$scope","$state","mainService","user",function(t,e,n,o){t.user=o}]),angular.module("houndApp").directive("headerDirective",function(){return{restrict:"AEC",templateUrl:"./routes/directives/headerTmpl.html"}}),angular.module("houndApp").controller("searchCtrl",["$scope","searchService",function(t,e){t.findpo=function(n){e.findpo(n).then(function(e){alert("PO found!"),console.log(e),t.poInfo=e,t.poNumber=""})}}]),angular.module("houndApp").directive("searchDirective",function(){return{restrict:"AEC",templateUrl:"./routes/directives/searchTmpl.html",controller:"searchCtrl"}}),angular.module("houndApp").service("searchService",["$http",function(t){this.findpo=function(e){return t({method:"GET",url:"/api/getPo/"+e}).then(function(t){return t.data})}}]);